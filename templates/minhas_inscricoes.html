{% extends "base.html" %}
{% block title %}ğŸŸï¸ Minhas InscriÃ§Ãµes â€” Play Beach Tennis{% endblock %}

{% block content %}

<section class="container">
  <h1>ğŸŸï¸ Minhas InscriÃ§Ãµes</h1>
  <p class="lead">Veja suas inscriÃ§Ãµes realizadas em torneios.</p>

  <div id="listaInscricoes" style="margin-top:20px;">
    <p>Carregando inscriÃ§Ãµes...</p>
  </div>
</section>
{% endblock %}

{% block scripts %}

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const lista = document.getElementById("listaInscricoes");

  try {
    const res = await fetch("/api/minhas_inscricoes");
    const data = await res.json();

    if (!res.ok || !Array.isArray(data) || data.length === 0) {
      lista.innerHTML = "<p style='color:#777;'>VocÃª ainda nÃ£o possui inscriÃ§Ãµes.</p>";
      return;
    }

    lista.innerHTML = "";
    data.forEach(insc => {
      const card = document.createElement("div");
      card.className = "card";
      card.style.marginBottom = "12px";
      card.innerHTML = `
        <strong>${insc.torneio}</strong><br>
        ğŸ’° Valor: R$ ${parseFloat(insc.valor).toFixed(2)}<br>
        ğŸ’³ Pagamento: ${insc.forma_pagamento}<br>
        ğŸ¯ NÃ­vel: ${insc.nivel}<br>
        ğŸ•’ Data: ${new Date(insc.data_inscricao).toLocaleDateString('pt-BR')}
      `;
      lista.appendChild(card);
    });

  } catch (err) {
    console.error("Erro ao carregar inscriÃ§Ãµes:", err);
    lista.innerHTML = "<p style='color:red;'>Erro ao carregar inscriÃ§Ãµes. Tente novamente.</p>";
  }
});
</script>

{% endblock %}
